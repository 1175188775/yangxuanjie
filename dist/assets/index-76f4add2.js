import{d as g,o as m,c as _,a as o,u as U,b as j,r as f,e as B,t as x,f as s,w as n,g as c,h as w,i as N,j as R,F as V,k as q,l as $}from"./index-49c8bf89.js";import{_ as z}from"./_plugin-vue_export-helper-c27b6911.js";const L={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},K=o("rect",{x:"96",y:"32",width:"320",height:"448",rx:"48",fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"32"},null,-1),D=o("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M208 80h96"},null,-1),F=o("path",{d:"M333.48 284.51A39.65 39.65 0 0 0 304 272c-11.6 0-22.09 4.41-29.54 12.43s-11.2 19.12-10.34 31C265.83 338.91 283.72 358 304 358s38.14-19.09 39.87-42.55c.88-11.78-2.82-22.77-10.39-30.94z",fill:"currentColor"},null,-1),J=o("path",{d:"M371.69 448H236.31a12.05 12.05 0 0 1-9.31-4.17a13 13 0 0 1-2.76-10.92c3.25-17.56 13.38-32.31 29.3-42.66C267.68 381.06 285.6 376 304 376s36.32 5.06 50.46 14.25c15.92 10.35 26.05 25.1 29.3 42.66a13 13 0 0 1-2.76 10.92a12.05 12.05 0 0 1-9.31 4.17z",fill:"currentColor"},null,-1),A=[K,D,F,J],E=g({name:"IdCardOutline",render:function(d,a){return m(),_("svg",L,A)}}),H={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},T=o("path",{d:"M336 208v-95a80 80 0 0 0-160 0v95",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),G=o("rect",{x:"96",y:"208",width:"320",height:"272",rx:"48",ry:"48",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),Q=[T,G],I=g({name:"LockClosedOutline",render:function(d,a){return m(),_("svg",H,Q)}}),W={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},X=o("path",{d:"M344 144c-3.92 52.87-44 96-88 96s-84.15-43.12-88-96c-4-55 35-96 88-96s92 42 88 96z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),Y=o("path",{d:"M256 304c-87 0-175.3 48-191.64 138.6C62.39 453.52 68.57 464 80 464h352c11.44 0 17.62-10.48 15.65-21.4C431.3 352 343 304 256 304z",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),Z=[X,Y],ee=g({name:"PersonOutline",render:function(d,a){return m(),_("svg",W,Z)}}),se={class:"login-container"},te={class:"cyber-card"},ne={class:"card-header"},oe={class:"title"},re={class:"action-buttons"},ae=g({__name:"index",setup(h){const d=U(),a=j(),b=f(null),k=f(!1),r=f(!1),e=f({username:"",password:"",nickname:"",confirmPassword:""});function M(){return Math.floor(Math.random()*(99999999-1e7+1)+1e7).toString()}const S=B(()=>{const l={username:[{required:!0,message:"请输入账号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能小于6位",trigger:"blur"}]};return r.value?{...l,nickname:[{required:!0,message:"请输入昵称",trigger:"blur"},{min:2,max:10,message:"昵称长度在2-10个字符",trigger:"blur"}],confirmPassword:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:(t,u)=>u===e.value.password,message:"两次输入的密码不一致",trigger:"blur"}]}:l});function P(){r.value=!r.value,e.value={username:"",password:"",nickname:"",confirmPassword:""},r.value&&(e.value.username=M())}async function y(){var l;k.value=!0;try{if(await((l=b.value)==null?void 0:l.validate()),r.value)localStorage.setItem(e.value.username,JSON.stringify({password:e.value.password,nickname:e.value.nickname})),a.success("注册成功"),r.value=!1,e.value={username:"",password:"",nickname:"",confirmPassword:""};else{if(e.value.username==="admin"&&e.value.password==="123456"){a.success("登录成功"),localStorage.setItem("isLoggedIn","true"),localStorage.setItem("currentUser","admin"),d.push("/snake-game");return}const t=localStorage.getItem(e.value.username);t?JSON.parse(t).password===e.value.password?(a.success("登录成功"),localStorage.setItem("isLoggedIn","true"),localStorage.setItem("currentUser",e.value.username),d.push("/snake-game")):a.error("密码错误"):a.error("账号不存在")}}catch{}finally{k.value=!1}}return(l,t)=>{const u=c("n-icon"),p=c("n-input"),v=c("n-form-item"),C=c("n-button"),O=c("n-form");return m(),_("div",se,[o("div",te,[o("div",ne,[o("div",oe,x(r.value?"用户注册":"系统登录"),1),t[4]||(t[4]=o("div",{class:"cyber-line"},null,-1))]),s(O,{ref_key:"formRef",ref:b,model:e.value,rules:S.value,"label-placement":"left",class:"cyber-form"},{default:n(()=>[s(v,{path:"username",label:"账号"},{default:n(()=>[s(p,{value:e.value.username,"onUpdate:value":t[0]||(t[0]=i=>e.value.username=i),placeholder:"请输入账号",disabled:r.value},{prefix:n(()=>[s(u,null,{default:n(()=>[s(w(ee))]),_:1})]),_:1},8,["value","disabled"])]),_:1}),s(v,{path:"password",label:"密码"},{default:n(()=>[s(p,{value:e.value.password,"onUpdate:value":t[1]||(t[1]=i=>e.value.password=i),type:"password","show-password-on":"click",placeholder:"请输入密码",onKeydown:N(R(y,["prevent"]),["enter"])},{prefix:n(()=>[s(u,null,{default:n(()=>[s(w(I))]),_:1})]),_:1},8,["value","onKeydown"])]),_:1}),r.value?(m(),_(V,{key:0},[s(v,{path:"nickname",label:"昵称"},{default:n(()=>[s(p,{value:e.value.nickname,"onUpdate:value":t[2]||(t[2]=i=>e.value.nickname=i),placeholder:"请输入昵称"},{prefix:n(()=>[s(u,null,{default:n(()=>[s(w(E))]),_:1})]),_:1},8,["value"])]),_:1}),s(v,{path:"confirmPassword",label:"确认密码"},{default:n(()=>[s(p,{value:e.value.confirmPassword,"onUpdate:value":t[3]||(t[3]=i=>e.value.confirmPassword=i),type:"password","show-password-on":"click",placeholder:"请再次输入密码"},{prefix:n(()=>[s(u,null,{default:n(()=>[s(w(I))]),_:1})]),_:1},8,["value"])]),_:1})],64)):q("",!0),o("div",re,[s(C,{type:"primary",class:"cyber-button",loading:k.value,onClick:y},{default:n(()=>[$(x(r.value?"注册":"登录"),1)]),_:1},8,["loading"]),s(C,{class:"cyber-button switch-button",onClick:P},{default:n(()=>[$(x(r.value?"返回登录":"注册账号"),1)]),_:1})])]),_:1},8,["model","rules"])])])}}});const ie=z(ae,[["__scopeId","data-v-772d538e"]]);export{ie as default};
